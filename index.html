<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Korean-English Vocab Test</title>
  <style>
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>Korean-English Vocab Test</h1>

  <!-- Settings: Choose the word range -->
  <div id="settings">
    <p>Choose a range of words (1 to 400):</p>
    <form id="rangeForm">
      <label>Start index (1-based): 
        <input type="number" id="startIndex" value="1" min="1">
      </label>
      <label>End index: 
        <input type="number" id="endIndex" value="10" min="1">
      </label>
      <button type="submit">Start Test</button>
    </form>
  </div>

  <!-- Quiz Section -->
  <div id="quiz" class="hidden">
    <p id="question"></p>
    <input type="text" id="answer" placeholder="Your answer">
    <button onclick="checkAnswer()">Submit</button>
    <p id="feedback"></p>
    <p>Question <span id="currentCount"></span> of <span id="totalCount"></span></p>
  </div>

  <!-- Results Section -->
  <div id="results" class="hidden">
    <h2>Test Completed!</h2>
    <p>Your score: <span id="score"></span>/<span id="total"></span></p>
    <button onclick="restartTest()">Restart</button>
  </div>

  <script>
    // Sample vocab array. Replace with your 400 words.
    const vocab = [
      { english: "culture", korean: ["문화", "교양"] },
      { english: "experience", korean: ["경험"] },
      { english: "education", korean: ["교육"] },
      { english: "symbol", korean: ["상징"] },
      { english: "effect", korean: ["결과", "영향", "효과"] },
      { english: "liberty", korean: ["자유"] },
      { english: "affair", korean: ["사건", "일"] },
      { english: "comfort", korean: ["안락", "위안"] },
      { english: "tradition", korean: ["전통", "전설"] },
      { english: "subject", korean: ["학과", "주제", "백성"] }
      // ... add more words up to 400
    ];

    let selectedWords = [];
    let currentIndex = 0;
    let score = 0;
    let currentQuestionType = ""; // "eng-to-kor" or "kor-to-eng"

    const settingsDiv = document.getElementById("settings");
    const quizDiv = document.getElementById("quiz");
    const resultsDiv = document.getElementById("results");

    // Set up the test based on user input
    document.getElementById("rangeForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const start = parseInt(document.getElementById("startIndex").value) - 1;
      const end = parseInt(document.getElementById("endIndex").value);
      if (start < 0 || end > vocab.length || start >= end) {
        alert("Please enter a valid range within 1 to " + vocab.length);
        return;
      }
      selectedWords = vocab.slice(start, end);
      // Shuffle the selected words for random order
      selectedWords.sort(() => Math.random() - 0.5);
      currentIndex = 0;
      score = 0;
      document.getElementById("totalCount").innerText = selectedWords.length;
      settingsDiv.classList.add("hidden");
      quizDiv.classList.remove("hidden");
      loadQuestion();
    });

    function loadQuestion() {
      if (currentIndex >= selectedWords.length) {
        finishTest();
        return;
      }
      const currentWord = selectedWords[currentIndex];
      // Randomly choose the question type
      currentQuestionType = Math.random() < 0.5 ? "eng-to-kor" : "kor-to-eng";
      if (currentQuestionType === "eng-to-kor") {
        document.getElementById("question").innerText = "What is the Korean meaning of: " + currentWord.english + "?";
      } else {
        document.getElementById("question").innerText = "What is the English meaning of: " + currentWord.korean[0] + "?";
      }
      document.getElementById("currentCount").innerText = currentIndex + 1;
      document.getElementById("answer").value = "";
      document.getElementById("feedback").innerText = "";
    }

    function checkAnswer() {
      const userAnswer = document.getElementById("answer").value.trim();
      const currentWord = selectedWords[currentIndex];
      let isCorrect = false;
      if (currentQuestionType === "eng-to-kor") {
        isCorrect = currentWord.korean.includes(userAnswer);
      } else {
        isCorrect = currentWord.english.toLowerCase() === userAnswer.toLowerCase();
      }
      if (isCorrect) {
        score++;
        document.getElementById("feedback").innerText = "Correct!";
      } else {
        if (currentQuestionType === "eng-to-kor") {
          document.getElementById("feedback").innerText = "Incorrect. Acceptable answers: " + currentWord.korean.join(", ");
        } else {
          document.getElementById("feedback").innerText = "Incorrect. Correct answer: " + currentWord.english;
        }
      }
      currentIndex++;
      setTimeout(loadQuestion, 1500);
    }

    function finishTest() {
      quizDiv.classList.add("hidden");
      resultsDiv.classList.remove("hidden");
      document.getElementById("score").innerText = score;
      document.getElementById("total").innerText = selectedWords.length;
    }

    function restartTest() {
      resultsDiv.classList.add("hidden");
      settingsDiv.classList.remove("hidden");
    }
  </script>
</body>
</html>

    }
  </script>
</body>
</html>
